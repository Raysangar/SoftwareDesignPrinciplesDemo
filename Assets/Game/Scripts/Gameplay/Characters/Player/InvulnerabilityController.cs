using UnityEngine;

namespace DesignPrinciplesDemo.Gameplay.Character {
  public class InvulnerabilityController : MonoBehaviour {

    public bool IsInvulnerable {
      get {
        return invulnerabilityTimeLeft > 0;
      }
    }

    public void SetInvulnarabilityFor(float seconds) {
      invulnerabilityTimeLeft += seconds;
      enabled = true;
    }

    private void Awake() {
      ResetInvulnerability ();
    }

    private void Update () {
      invulnerabilityTimeLeft -= Time.deltaTime;
      if (invulnerabilityTimeLeft <= 0) {
        ResetInvulnerability ();
      }
    }

    private void ResetInvulnerability () {
      invulnerabilityTimeLeft = 0;
      enabled = false;
    }

    private float invulnerabilityTimeLeft;
  }
}
